# CLIコマンド

Gemini CLIは、セッションの管理、インターフェースのカスタマイズ、およびその動作の制御に役立ついくつかの組み込みコマンドをサポートしています。これらのコマンドには、スラッシュ (`/`)、アットマーク (`@`)、または感嘆符 (`!`) のプレフィックスが付きます。

## スラッシュコマンド (`/`)

スラッシュコマンドは、CLI自体に対するメタレベルの制御を提供します。

- **`/bug`**

  - **説明:** Gemini CLIに関する問題を報告します。デフォルトでは、問題はGemini CLIのGitHubリポジトリに報告されます。`/bug`の後に入力した文字列が、報告されるバグの見出しになります。デフォルトの`/bug`の動作は、`.gemini/settings.json`ファイルの`bugCommand`設定を使用して変更できます。

- **`/chat`**

  - **説明:** 会話の履歴を保存および再開して、会話の状態を対話的に分岐させたり、後のセッションから以前の状態を再開したりします。
  - **サブコマンド:**
    - **`save`**
      - **説明:** 現在の会話履歴を保存します。会話の状態を識別するために`<tag>`を追加する必要があります。
      - **使用法:** `/chat save <tag>`
    - **`resume`**
      - **説明:** 以前の保存から会話を再開します。
      - **使用法:** `/chat resume <tag>`
    - **`list`**
      - **説明:** チャット状態を再開するために利用可能なタグを一覧表示します。

- **`/clear`**

  - **説明:** CLI内の表示されているセッション履歴とスクロールバックを含む、ターミナル画面をクリアします。基になるセッションデータ (履歴の呼び出し用) は、正確な実装によっては保持される場合がありますが、表示はクリアされます。
  - **キーボードショートカット:** **Ctrl+L**を押すと、いつでもクリア操作を実行できます。

- **`/compress`**

  - **説明:** チャットコンテキスト全体を要約に置き換えます。これにより、何が起こったかの概要を保持しながら、将来のタスクに使用されるトークンを節約できます。

- **`/editor`**

  - **説明:** サポートされているエディタを選択するためのダイアログを開きます。

- **`/help`** (または **`/?`**)

  - **説明:** 利用可能なコマンドとその使用法を含む、Gemini CLIに関するヘルプ情報を表示します。

- **`/mcp`**

  - **説明:** 設定されているモデルコンテキストプロトコル (MCP) サーバー、それらの接続ステータス、サーバーの詳細、および利用可能なツールを一覧表示します。
  - **サブコマンド:**
    - **`desc`** または **`descriptions`**:
      - **説明:** MCPサーバーとツールの詳細な説明を表示します。
    - **`nodesc`** または **`nodescriptions`**:
      - **説明:** ツールの説明を非表示にし、ツール名のみを表示します。
    - **`schema`**:
      - **説明:** ツールの設定されたパラメータの完全なJSONスキーマを表示します。
  - **キーボードショートカット:** **Ctrl+T**を押すと、いつでもツールの説明の表示と非表示を切り替えることができます。

- **`/memory`**

  - **説明:** AIの指示コンテキスト (`GEMINI.md`ファイルからロードされた階層メモリ) を管理します。
  - **サブコマンド:**
    - **`add`**:
      - **説明:** 次のテキストをAIのメモリに追加します。使用法: `/memory add <記憶するテキスト>`
    - **`show`**:
      - **説明:** すべての`GEMINI.md`ファイルからロードされた現在の階層メモリの完全な連結コンテンツを表示します。これにより、Geminiモデルに提供されている指示コンテキストを検査できます。
    - **`refresh`**:
      - **説明:** 設定された場所 (グローバル、プロジェクト/祖先、およびサブディレクトリ) にあるすべての`GEMINI.md`ファイルから階層的な指示メモリをリロードします。このコマンドは、モデルを最新の`GEMINI.md`コンテンツで更新します。
    - **注:** `GEMINI.md`ファイルが階層メモリにどのように貢献するかについての詳細は、[CLI設定ドキュメント](./configuration.md#4-geminimd-files-hierarchical-instructional-context)を参照してください。

- **`/restore`**

  - **説明:** ツールが実行される直前の状態にプロジェクトファイルを復元します。これは、ツールによって行われたファイルの編集を取り消すのに特に便利です。ツール呼び出しIDなしで実行すると、復元可能な利用可能なチェックポイントが一覧表示されます。
  - **使用法:** `/restore [tool_call_id]`
  - **注:** CLIが`--checkpointing`オプションで呼び出された場合、または[設定](./configuration.md)を介して設定されている場合にのみ利用可能です。詳細については、[チェックポイントのドキュメント](../checkpointing.md)を参照してください。

- **`/stats`**

  - **説明:** トークン使用量、キャッシュされたトークンの節約 (利用可能な場合)、およびセッション期間を含む、現在のGemini CLIセッションの詳細な統計を表示します。注: キャッシュされたトークン情報は、キャッシュされたトークンが使用されている場合にのみ表示されます。これは、APIキー認証では発生しますが、現時点ではOAuth認証では発生しません。

- [**`/theme`**](./themes.md)

  - **説明:** Gemini CLIの表示テーマを変更できるダイアログを開きます。

- **`/auth`**

  - **説明:** 認証方法を変更できるダイアログを開きます。

- **`/about`**

  - **説明:** バージョン情報を表示します。問題を報告する際は、この情報を共有してください。

- [**`/tools`**](../tools/index.md)

  - **説明:** Gemini CLI内で現在利用可能なツールの一覧を表示します。
  - **サブコマンド:**
    - **`desc`** または **`descriptions`**:
      - **説明:** モデルに提供されている各ツールの完全な説明とともに、各ツールの詳細な説明を表示します。
    - **`nodesc`** または **`nodescriptions`**:
      - **説明:** ツールの説明を非表示にし、ツール名のみを表示します。

- **`/quit`** (または **`/exit`**)

  - **説明:** Gemini CLIを終了します。

## アットコマンド (`@`)

アットコマンドは、ファイルまたはディレクトリの内容をGeminiへのプロンプトの一部として含めるために使用されます。これらのコマンドには、gitを意識したフィルタリングが含まれています。

- **`@<path_to_file_or_directory>`**

  - **説明:** 指定されたファイルまたはファイルの内容を現在のプロンプトに挿入します。これは、特定のコード、テキスト、またはファイルのコレクションに関する質問をするのに便利です。
  - **例:**
    - `@path/to/your/file.txt このテキストを説明してください。`
    - `@src/my_project/ このディレクトリのコードを要約してください。`
    - `このファイルは何についてですか？ @README.md`
  - **詳細:**
    - 単一ファイルへのパスが指定された場合、そのファイルの内容が読み取られます。
    - ディレクトリへのパスが指定された場合、コマンドはそのディレクトリおよびサブディレクトリ内のファイルの内容を読み取ろうとします。
    - パス内のスペースは、バックスラッシュでエスケープする必要があります (例: `@My\ Documents/file.txt`)。
    - コマンドは内部的に`read_many_files`ツールを使用します。コンテンツが取得され、Geminiモデルに送信される前にクエリに挿入されます。
    - **Gitを意識したフィルタリング:** デフォルトでは、gitで無視されたファイル (`node_modules/`、`dist/`、`.env`、`.git/`など) は除外されます。この動作は、`fileFiltering`設定で変更できます。
    - **ファイルタイプ:** このコマンドは、テキストベースのファイルを対象としています。任意のファイルを読み取ろうとする場合がありますが、バイナリファイルや非常に大きなファイルは、パフォーマンスと関連性を確保するために、基になる`read_many_files`ツールによってスキップまたは切り捨てられる場合があります。ツールは、ファイルがスキップされたかどうかを示します。
  - **出力:** CLIは、`read_many_files`が使用されたことを示すツール呼び出しメッセージと、ステータスと処理されたパスを詳述するメッセージを表示します。

- **`@` (単独のアットマーク)**
  - **説明:** パスなしで単独の`@`記号を入力すると、クエリはそのままGeminiモデルに渡されます。これは、プロンプトで`@`記号について具体的に話している場合に役立つことがあります。

### `@`コマンドのエラー処理

- `@`の後に指定されたパスが見つからないか無効な場合、エラーメッセージが表示され、クエリがGeminiモデルに送信されないか、ファイルの内容なしで送信されることがあります。
- `read_many_files`ツールでエラー (権限の問題など) が発生した場合も、報告されます。

## シェルモードとパススルーコマンド (`!`)

`!`プレフィックスを使用すると、Gemini CLI内からシステムのシェルと直接対話できます。

- **`!<shell_command>`**

  - **説明:** 指定された`<shell_command>`をシステムのデフォルトシェルで実行します。コマンドからの出力またはエラーは、ターミナルに表示されます。
  - **例:**
    - `!ls -la` (`ls -la`を実行し、Gemini CLIに戻ります)
    - `!git status` (`git status`を実行し、Gemini CLIに戻ります)

- **`!` (シェルモードの切り替え)**

  - **説明:** `!`を単独で入力すると、シェルモードが切り替わります。
    - **シェルモードへの移行:**
      - アクティブになると、シェルモードは異なる色と「シェルモードインジケーター」を使用します。
      - シェルモード中は、入力したテキストは直接シェルコマンドとして解釈されます。
    - **シェルモードの終了:**
      - 終了すると、UIは標準の外観に戻り、通常のGemini CLIの動作が再開されます。

- **すべての`!`使用に関する注意:** シェルモードで実行するコマンドは、ターミナルで直接実行した場合と同じ権限と影響を持ちます。 