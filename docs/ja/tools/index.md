# Gemini CLIツール

Gemini CLIには、Geminiモデルがローカル環境と対話し、情報にアクセスし、アクションを実行するために使用する組み込みツールが含まれています。これらのツールは、CLIの機能を強化し、テキスト生成を超えて幅広いタスクを支援できるようにします。

## Gemini CLIツールの概要

Gemini CLIのコンテキストでは、ツールとは、Geminiモデルが実行を要求できる特定の関数またはモジュールです。たとえば、Geminiに「`my_document.txt`の内容を要約して」と依頼すると、モデルはそのファイルを読み取る必要があると判断し、`read_file`ツールの実行を要求する可能性が高くなります。

コアコンポーネント（`packages/core`）は、これらのツールを管理し、それらの定義（スキーマ）をGeminiモデルに提示し、要求されたときに実行し、ユーザー向けの応答にさらに処理するために結果をモデルに返します。

これらのツールは、次の機能を提供します。

- **ローカル情報へのアクセス:** ツールを使用すると、Geminiはローカルファイルシステムにアクセスし、ファイルの内容を読み取り、ディレクトリを一覧表示できます。
- **コマンドの実行:** `run_shell_command`などのツールを使用すると、Geminiはシェルコマンドを実行できます（適切な安全対策とユーザーの確認が必要です）。
- **Webとの対話:** ツールはURLからコンテンツを取得できます。
- **アクションの実行:** ツールは、ファイルを変更したり、新しいファイルを作成したり、システムで他のアクションを実行したりできます（通常、これも安全策が講じられています）。
- **応答のグラウンディング:** リアルタイムまたは特定のローカルデータを取得するためにツールを使用することで、Geminiの応答はより正確で、関連性が高く、実際のコンテキストに基づいたものになります。

## Gemini CLIツールの使用方法

Gemini CLIツールを使用するには、Gemini CLIにプロンプトを提供します。プロセスは次のようになります。

1.  Gemini CLIにプロンプトを提供します。
2.  CLIはプロンプトをコアに送信します。
3.  コアは、プロンプトと会話履歴とともに、利用可能なツールとその説明/スキーマのリストをGemini APIに送信します。
4.  Geminiモデルはリクエストを分析します。ツールが必要であると判断した場合、その応答には、特定のパラメーターを持つ特定のツールを実行するリクエストが含まれます。
5.  コアはこのツールリクエストを受信し、検証し、（機密性の高い操作についてはユーザーの確認後に）ツールを実行します。
6.  ツールからの出力はGeminiモデルに返送されます。
7.  Geminiモデルは、ツールの出力を使用して最終的な回答を作成し、コアを介してCLIに返送され、表示されます。

通常、ツールが呼び出されているとき、および成功したか失敗したかを示すメッセージがCLIに表示されます。

## セキュリティと確認

特にファイルシステムを変更したりコマンドを実行したりできる多くのツール（`write_file`、`edit`、`run_shell_command`）は、安全性を念頭に置いて設計されています。Gemini CLIは通常、次のことを行います。

- **確認を要求:** 潜在的に機密性の高い操作を実行する前にプロンプTGTを表示し、実行されようとしているアクションを示します。
- **サンドボックスの利用:** すべてのツールは、サンドボックスによって強制される制限の対象となります（[README](../../README.md#sandboxing)を参照）。これは、サンドボックスで操作する場合、使用したいツール（MCPサーバーを含む）はサンドボックス環境*内*で利用可能でなければならないことを意味します。たとえば、`npx`を介してMCPサーバーを実行するには、`npx`実行可能ファイルがサンドボックスのDockerイメージ内にインストールされているか、`sandbox-exec`環境で利用可能である必要があります。

ツールが続行することを許可する前に、常に確認プロンプトを注意深く確認することが重要です。

## Gemini CLIのツールの詳細については、こちらをご覧ください。

Gemini CLIの組み込みツールは、次のように大別できます。

- **[ファイルシステムツール](./file-system.md):** ファイルやディレクトリの操作（読み取り、書き込み、一覧表示、検索など）。
- **[シェルツール](./shell.md) (`run_shell_command`):** シェルコマンドの実行用。
- **[Webフェッチツール](./web-fetch.md) (`web_fetch`):** URLからのコンテンツ取得用。
- **[Web検索ツール](./web-search.md) (`web_search`):** Web検索用。
- **[複数ファイル読み取りツール](./multi-file.md) (`read_many_files`):** 複数のファイルまたはディレクトリからコンテンツを読み取るための特殊なツールで、`@`コマンドでよく使用されます。
- **[メモリツール](./memory.md) (`save_memory`):** セッション間で情報を保存および呼び出すためのツール。

さらに、これらのツールには次のものが組み込まれています。

- **[MCPサーバー](./mcp-server.md)**: MCPサーバーは、Geminiモデルとローカル環境またはAPIなどの他のサービスとの間のブリッジとして機能します。
- **[サンドボックス](../sandbox.md)**: サンドボックスは、モデルとその変更を環境から分離して、潜在的なリスクを軽減します。 