# 複数ファイル読み取りツール (`read_many_files`)

このドキュメントでは、Gemini CLIの`read_many_files`ツールについて説明します。

## 説明

`read_many_files`を使用して、パスまたはglobパターンで指定された複数のファイルからコンテンツを読み取ります。このツールの動作は、提供されたファイルによって異なります。

- テキストファイルの場合、このツールはそれらのコンテンツを単一の文字列に連結します。
- 画像（PNG、JPEGなど）およびPDFファイルの場合、名前または拡張子で明示的に要求された場合に、それらをbase64エンコードデータとして読み取り、返します。

`read_many_files`は、コードベースの概要の取得、特定の機能が実装されている場所の検索、ドキュメントの確認、複数の構成ファイルからのコンテキストの収集などのタスクを実行するために使用できます。

### 引数

`read_many_files`は次の引数を取ります。

- `paths`（文字列のリスト、必須）：ツールのターゲットディレクトリを基準としたglobパターンまたはパスの配列（例：`["src/**/*.ts"]`、`["README.md", "docs/", "assets/logo.png"]`）。
- `exclude`（文字列のリスト、オプション）：除外するファイル/ディレクトリのglobパターン（例：`["**/*.log", "temp/"]`）。`useDefaultExcludes`がtrueの場合、これらはデフォルトの除外に追加されます。
- `include`（文字列のリスト、オプション）：含める追加のglobパターン。これらは`paths`とマージされます（例：広範囲に除外された場合にテストファイルを具体的に追加するための`["*.test.ts"]`、または特定の画像タイプを含めるための`["images/*.jpg"]`）。
- `recursive`（ブール値、オプション）：再帰的に検索するかどうか。これは主にglobパターンの`**`によって制御されます。デフォルトは`true`です。
- `useDefaultExcludes`（ブール値、オプション）：デフォルトの除外パターンのリストを適用するかどうか（例：`node_modules`、`.git`、画像/ PDF以外のバイナリファイル）。デフォルトは`true`です。
- `respect_git_ignore`（ブール値、オプション）：ファイルを検索するときに.gitignoreパターンを尊重するかどうか。デフォルトはtrueです。

## Gemini CLIで`read_many_files`を使用する方法

`read_many_files`は、提供された`paths`および`include`パターンに一致するファイルを検索し、`exclude`パターンとデフォルトの除外（有効な場合）を尊重します。

- テキストファイルの場合：一致した各ファイルの内容を読み取り（画像/ PDFとして明示的に要求されていないバイナリファイルをスキップしようとします）、各ファイルの内容の間に`--- {filePath} ---`という区切り文字を入れて単一の文字列に連結します。デフォルトでUTF-8エンコーディングを使用します。
- 画像およびPDFファイルの場合：名前または拡張子で明示的に要求された場合（例：`paths: ["logo.png"]`または`include: ["*.pdf"]`）、ツールはファイルを読み取り、その内容をbase64エンコードされた文字列として返します。
- このツールは、初期コンテンツのヌルバイトをチェックすることにより、他のバイナリファイル（一般的な画像/ PDFタイプに一致しないか、明示的に要求されていないもの）を検出してスキップしようとします。

使用法：

```
read_many_files(paths=["ここにファイルまたはパスを記述します。"], include=["含める追加ファイル。"], exclude=["除外するファイル。"], recursive=False, useDefaultExcludes=false, respect_git_ignore=true)
```

## `read_many_files`の例

`src`ディレクトリ内のすべてのTypeScriptファイルを読み取ります。

```
read_many_files(paths=["src/**/*.ts"])
```

メインのREADME、`docs`ディレクトリ内のすべてのMarkdownファイル、および特定のロゴ画像を読み取りますが、特定のファイルは除外します。

```
read_many_files(paths=["README.md", "docs/**/*.md", "assets/logo.png"], exclude=["docs/OLD_README.md"])
```

すべてのJavaScriptファイルを読み取りますが、テストファイルと`images`フォルダー内のすべてのJPEGを明示的に含めます。

```
read_many_files(paths=["**/*.js"], include=["**/*.test.js", "images/**/*.jpg"], useDefaultExcludes=False)
```

## 重要事項

- **バイナリファイルの処理:**
  - **画像/ PDFファイル:** このツールは、一般的な画像タイプ（PNG、JPEGなど）とPDFファイルを読み取り、base64エンコードデータとして返すことができます。これらのファイルは、`paths`または`include`パターンによって明示的にターゲットにされる*必要があります*（例：`image.png`のような正確なファイル名を指定するか、`*.jpeg`のようなパターンを指定します）。
  - **その他のバイナリファイル:** このツールは、初期コンテンツのヌルバイトを調べることにより、他の種類のバイナリファイルを検出してスキップしようとします。このツールは、これらのファイルを出力から除外します。
- **パフォーマンス:** 非常に多数のファイルまたは非常に大きな個々のファイルを読み取ると、リソースを大量に消費する可能性があります。
- **パスの特異性:** パスとglobパターンがツールのターゲットディレクトリを基準にして正しく指定されていることを確認してください。画像/ PDFファイルの場合、パターンがそれらを含めるのに十分具体的であることを確認してください。
- **デフォルトの除外:** デフォルトの除外パターン（`node_modules`、`.git`など）に注意し、それらをオーバーライドする必要がある場合は`useDefaultExcludes=False`を使用しますが、慎重に行ってください。 